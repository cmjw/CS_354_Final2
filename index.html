<!DOCTYPE html>

<html>
    <style>
        .column {
            float: left;
            width: 50%;
        }

        /* Clear floats after the columns */
        .row:after {
            content: "";
            display: table;
            clear: both;
        }
    </style>

    <body>
        <script src="./lib/lightgl/lightgl.js"></script>
        <script src="./CSGBuilder_O.js"></script>
        <script src="./CSGViewer.js"></script>
        <script src="./geometry/CSG_B_Vector.js"></script>
        <script src="./geometry/CSG_B_Plane.js"></script>
        <script src="./geometry/CSG_B_Polygon.js"></script>
        <script src="./geometry/CSG_B_Vertex.js"></script>
        <script src="./geometry/CSG_B_Node.js"></script>

        <script src="./primitives/sphere.js"></script>
        <script src="./primitives/cube.js"></script>

        
        <div class="row">
            <div class="column">
                
                <div class="column">
                    <td><div id="0" class="viewer"></div><code>a</code></td>

                    <select id="primitiveASelector" onchange="changePrimitiveA()">
                        <option value="cube">Cube</option>
                        <option value="sphere">Sphere</option>
                    </select>
                </div>
                <div class="column">
                    <td><div id="1" class="viewer"></div><code>b</code></td>

                    <select id="primitiveBSelector" onchange="changePrimitiveB()">
                        <option value="cube">Cube</option>
                        <option value="sphere">Sphere</option>
                    </select>
                </div>
            </div>
            <div class="column">
                
                <td><div id="2" class="viewer"></div><code>a.intersect(b)</code></td>
            </div>
            
          </div> 


        <script>

            var a = CSGBuilder.cube();
            var b = CSGBuilder.sphere({ radius: 1.35 });
            a.setColor(0,0,1);
            b.setColor(0,1,0);
            var c = a.intersect(b);

            function changePrimitiveA() {
                console.log("change primitive A");

                var select = document.getElementById("primitiveASelector");
                var selectedValue = select.options[select.selectedIndex].value;
                
                // Modify var a based on selected primitive
                if (selectedValue === "cube") {
                    a = CSGBuilder.cube();
                } else if (selectedValue === "sphere") {
                    a = CSGBuilder.sphere({ radius: 1.35 });
                }
                
                // Update viewer
                updateViewers();
            }

            function changePrimitiveB() {
                console.log("change primitive B");

                var select = document.getElementById("primitiveBSelector");
                var selectedValue = select.options[select.selectedIndex].value;
                
                // Modify var a based on selected primitive
                if (selectedValue === "cube") {
                    b = CSGBuilder.cube();
                } else if (selectedValue === "sphere") {
                    b = CSGBuilder.sphere({ radius: 1.35 });
                }
                
                // Update viewer
                updateViewers();
            }


            function updateViewers() {
                // Clear existing viewers
                clearViewers();
                

                addViewer(new CSGViewer(a, 400, 400, 6));
                addViewer(new CSGViewer(b, 400, 400, 6));
                addViewer(new CSGViewer(c, 800, 800, 6));
            }
            

            updateViewers();
        </script>
    </body>
</html>